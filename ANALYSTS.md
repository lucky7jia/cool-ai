# ğŸ¯ Expert Analyst é¡¹ç›®è§„èŒƒ

> æœ¬æ–‡æ¡£å®šä¹‰äº† Expert Analyst çš„æ¶æ„è®¾è®¡å’Œå¼€å‘è§„èŒƒã€‚

---

## ğŸ“Œ é¡¹ç›®å®šä½

è§£å†³**ä¿¡æ¯ä¸å¯¹ç§°**é—®é¢˜çš„ AI åˆ†æå·¥å…·ï¼š

```
ç”¨æˆ·é—®é¢˜ â†’ æ™ºèƒ½æœç´¢ â†’ å¤šä¸“å®¶åˆ†æ â†’ è¿­ä»£éªŒè¯ â†’ å…±è¯†ç»“è®º â†’ å¤šå¹³å°å¯¼å‡º
```

### æ ¸å¿ƒä»·å€¼

| ç—›ç‚¹ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| ä¿¡æ¯ç¢ç‰‡åŒ– | è‡ªåŠ¨æœç´¢èšåˆ |
| ä¸“ä¸šé—¨æ§›é«˜ | å¤šä¸“å®¶åä½œåˆ†æ |
| ä¿¡æ¯å¯é æ€§ | è¿­ä»£è‡ªè¯æœºåˆ¶ |
| å†…å®¹åˆ†å‘éš¾ | ä¸€é”®å¤šå¹³å°å¯¼å‡º |

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ–¥ï¸ Web UI  â”‚         âŒ¨ï¸ CLI                  â”‚   ğŸ”Œ API    â”‚
â”‚   (Gradio)  â”‚      (Typer + Rich)             â”‚   (Future)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      æ ¸å¿ƒå¼•æ“å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”— Chain    â”‚ ğŸ§  Experts  â”‚ ğŸ”„ Iterationâ”‚ ğŸ“Š Consensus      â”‚
â”‚  åˆ†æé“¾ç¼–æ’  â”‚   ä¸“å®¶ç®¡ç†   â”‚  è¿­ä»£éªŒè¯   â”‚   å…±è¯†ç”Ÿæˆ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       æ’ä»¶å±‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ğŸ” Search        â”‚           ğŸ“¤ Export                   â”‚
â”‚   æœç´¢å¼•æ“æ’ä»¶       â”‚          å¯¼å‡ºæ ¼å¼æ’ä»¶                  â”‚
â”‚  - æœç‹—æœç´¢         â”‚         - å…¬ä¼—å·                       â”‚
â”‚  - è‚¡ç¥¨æ•°æ®         â”‚         - å°çº¢ä¹¦                       â”‚
â”‚                     â”‚         - æ–°é—»ç¨¿                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      åŸºç¡€è®¾æ–½å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ğŸ¤– LLM           â”‚           ğŸ“ Storage                  â”‚
â”‚   Ollama æœ¬åœ°æ¨¡å‹    â”‚          é…ç½®å’Œç¼“å­˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ ç›®å½•ç»“æ„

```
cool-ai/
â”œâ”€â”€ experts/                 # ğŸ§  ä¸“å®¶å®šä¹‰
â”‚   â””â”€â”€ {name}/EXPERT.md    # æ¯ä¸ªä¸“å®¶ä¸€ä¸ªç›®å½•
â”‚
â”œâ”€â”€ plugins/                 # ğŸ”Œ æ’ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ search/             # æœç´¢å¼•æ“æ’ä»¶
â”‚   â”œâ”€â”€ data/               # æ•°æ®æºæ’ä»¶
â”‚   â””â”€â”€ export/             # å¯¼å‡ºæ ¼å¼æ’ä»¶
â”‚
â”œâ”€â”€ src/                     # ğŸ”§ æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ chain.py        # åˆ†æé“¾ç¼–æ’
â”‚   â”‚   â”œâ”€â”€ expert.py       # ä¸“å®¶åŠ è½½å™¨
â”‚   â”‚   â”œâ”€â”€ llm.py          # LLM é›†æˆ
â”‚   â”‚   â”œâ”€â”€ iteration.py    # è¿­ä»£éªŒè¯
â”‚   â”‚   â””â”€â”€ plugin.py       # æ’ä»¶ç®¡ç†
â”‚   â”œâ”€â”€ cli/                # å‘½ä»¤è¡Œæ¥å£
â”‚   â””â”€â”€ ui/                 # Web ç•Œé¢
â”‚
â””â”€â”€ templates/               # ğŸ“ å¯¼å‡ºæ¨¡æ¿
```

---

## ğŸ“‹ EXPERT.md æ ¼å¼è§„èŒƒ

æ¯ä¸ªä¸“å®¶é€šè¿‡ `EXPERT.md` æ–‡ä»¶å®šä¹‰ï¼š

```markdown
---
name: finance
description: "é‡‘èå¸‚åœºåˆ†æä¸“å®¶ï¼Œä¸“æ³¨äºè‚¡ç¥¨ä¼°å€¼ã€è´¢åŠ¡åˆ†æå’Œå¸‚åœºè¶‹åŠ¿ç ”åˆ¤"
metadata: 
  emoji: "ğŸ“ˆ"
  priority: 1
  domains: ["è‚¡ç¥¨", "åŸºé‡‘", "é‡‘è", "æŠ•èµ„"]
---

# é‡‘èåˆ†æä¸“å®¶

ä½ æ˜¯ä¸€ä½èµ„æ·±é‡‘èåˆ†æå¸ˆï¼Œå…·å¤‡ CFA èµ„æ ¼è®¤è¯...

## åˆ†ææ¡†æ¶

### 1. ä¼°å€¼åˆ†æ
- PE/PB/PS ç­‰ä¼°å€¼æŒ‡æ ‡
- æ¨ªå‘å¯¹æ¯”è¡Œä¸šæ°´å¹³
- çºµå‘å¯¹æ¯”å†å²åŒºé—´

### 2. åŸºæœ¬é¢è¯„ä¼°
- è¥æ”¶å¢é•¿è¶‹åŠ¿
- ç›ˆåˆ©èƒ½åŠ›åˆ†æ
- ç°é‡‘æµçŠ¶å†µ

### 3. æŠ€æœ¯é¢ç ”åˆ¤
- Kçº¿å½¢æ€
- å‡çº¿ç³»ç»Ÿ
- æˆäº¤é‡åˆ†æ

## è¾“å‡ºè¦æ±‚
- å¼•ç”¨å…·ä½“æ•°æ®
- ç»™å‡ºæ˜ç¡®å»ºè®®
- æ ‡æ³¨é£é™©æç¤º
```

### å­—æ®µè¯´æ˜

| å­—æ®µ | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `name` | âœ… | ä¸“å®¶å”¯ä¸€æ ‡è¯† |
| `description` | âœ… | ä¸“å®¶ç®€ä»‹ |
| `metadata.emoji` | âŒ | æ˜¾ç¤ºå›¾æ ‡ |
| `metadata.priority` | âŒ | ä¼˜å…ˆçº§ï¼ˆè¶Šå°è¶Šä¼˜å…ˆï¼‰ |
| `metadata.domains` | âŒ | æ“…é•¿é¢†åŸŸï¼ˆç”¨äºè‡ªåŠ¨åŒ¹é…ï¼‰ |

---

## ğŸ”„ åˆ†ææµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·æé—®] --> B[ä¸“å®¶åŒ¹é…]
    B --> C[ä¿¡æ¯æœç´¢]
    C --> D[è·å–å®æ—¶æ•°æ®]
    D --> E[å¤šä¸“å®¶åˆ†æ]
    E --> F{éœ€è¦è¡¥å……?}
    F -->|æ˜¯| G[è¯†åˆ«ä¿¡æ¯ç¼ºå£]
    G --> H[è¡¥å……æœç´¢]
    H --> E
    F -->|å¦| I[ç”Ÿæˆå…±è¯†]
    I --> J[å†…å®¹å¯¼å‡º]
```

### è¯¦ç»†æ­¥éª¤

1. **é—®é¢˜è¾“å…¥** - ç”¨æˆ·æå‡ºåˆ†æé—®é¢˜
2. **ä¸“å®¶åŒ¹é…** - æ ¹æ®é—®é¢˜é¢†åŸŸè‡ªåŠ¨åŒ¹é…ç›¸å…³ä¸“å®¶
3. **ä¿¡æ¯æœç´¢** - é€šè¿‡æœç´¢æ’ä»¶è·å–å®æ—¶ä¿¡æ¯
4. **æ•°æ®è·å–** - è·å–è‚¡ç¥¨ç­‰å®æ—¶è¡Œæƒ…æ•°æ®
5. **å¤šä¸“å®¶åˆ†æ** - å„ä¸“å®¶ä»ä¸åŒè§†è§’ç‹¬ç«‹åˆ†æ
6. **è¿­ä»£è‡ªè¯** - äº¤å‰éªŒè¯ã€è¯†åˆ«ä¿¡æ¯ç¼ºå£ã€è¡¥å……æœç´¢
7. **å…±è¯†ç”Ÿæˆ** - ç»¼åˆå„ä¸“å®¶è§‚ç‚¹å½¢æˆæœ€ç»ˆç»“è®º
8. **å†…å®¹å¯¼å‡º** - ç”Ÿæˆé€‚åˆä¸åŒå¹³å°çš„å†…å®¹æ ¼å¼

---

## ğŸ”Œ æ’ä»¶å¼€å‘è§„èŒƒ

### æœç´¢æ’ä»¶

```python
from src.core.plugin import SearchPlugin, SearchResult

class MySearchPlugin(SearchPlugin):
    name = "my-search"
    
    async def search(self, query: str, max_results: int = 10) -> list[SearchResult]:
        # å®ç°æœç´¢é€»è¾‘
        return [
            SearchResult(
                title="ç»“æœæ ‡é¢˜",
                url="https://...",
                snippet="æ‘˜è¦å†…å®¹",
            )
        ]
```

### å¯¼å‡ºæ’ä»¶

```python
from src.core.plugin import ExportPlugin

class MyExportPlugin(ExportPlugin):
    name = "my-export"
    
    async def export(self, content: str, metadata: dict) -> str:
        # å®ç°å¯¼å‡ºé€»è¾‘
        return formatted_content
```

---

## ğŸ› ï¸ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

- Python 3.11+
- éµå¾ª PEP 8
- ä½¿ç”¨ Ruff è¿›è¡Œä»£ç æ£€æŸ¥
- ç±»å‹æ³¨è§£å®Œæ•´

### å¼‚æ­¥ç¼–ç¨‹

```python
# âœ… æ¨è
async def fetch_data():
    async with httpx.AsyncClient() as client:
        response = await client.get(url)
        return response.json()

# âŒ é¿å…
def fetch_data():
    response = requests.get(url)  # é˜»å¡è°ƒç”¨
    return response.json()
```

### é”™è¯¯å¤„ç†

```python
try:
    result = await some_async_operation()
except SpecificError as e:
    logger.warning(f"æ“ä½œå¤±è´¥: {e}")
    return fallback_value
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ |
|------|------|
| é¦–æ¬¡å“åº”æ—¶é—´ | < 2s |
| å•ä¸“å®¶åˆ†ææ—¶é—´ | < 30s |
| å®Œæ•´åˆ†æï¼ˆ4ä¸“å®¶x2è½®ï¼‰ | < 5min |
| å†…å­˜å ç”¨ | < 500MB |

---

## ğŸš§ è·¯çº¿å›¾

- [x] å¤šä¸“å®¶åä½œåˆ†æ
- [x] å®æ—¶è‚¡ç¥¨æ•°æ®
- [x] Web UI ç•Œé¢
- [x] å¤šå¹³å°å¯¼å‡º
- [ ] åˆ†æå†å²è®°å½•
- [ ] ä¸“å®¶çŸ¥è¯†åº“
- [ ] API æ¥å£
- [ ] å®šæ—¶åˆ†æä»»åŠ¡

---

*Last updated: 2025-01*
